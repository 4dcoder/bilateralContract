# p2pCny

在CNY和其它加密数字货币及法币间安全地交易而且无需信任：To safely exchange between CNY and other digital crypt-currencies and fiat currencies without trust

# 缘起

######

在一些国家，人们非常希望金融行业保持稳定。数字加密货币和法币间的交易有可能改变现行的金融规则。取缔比特币交易所（中心化）【或资金流转量比较大的网关】的消息不胫而走。一些网关和交易所已经主动停止充值CNY。一时间数字经济体市场风声鹤唳，币价波动很大。
　　
######
　　
悲哀的牛蛙持有20万邮局的USD。国内比特币、以太币等价格急剧下跌时，邮局USD由比特币途径CNY--->BTC.okcoin--->BTC.bitstamp--->USD传导链也随之急剧下跌。汇率一度达到5.5。青蛙觉得可以抄底USD，想跟牛蛙以5.6价格交易。可惜青蛙没有CNY。

######
　　
怎么办呢？一种是找二狗站长充值。虽然二狗已经暂停了充值业务。但是死缠滥打地、死皮烂脸地求求也许也可以的。但想想算了吧。关键时刻，二狗扛不住人情，充了个百八十万，钱没多赚多少，真被请去喝茶就不好了。虽然道士是可以死道友不死贫道的，但终究还是不好的。青蛙还提议和牛蛙草签合同，分多笔交易。可以到达交易的目的，也可以把风险控制在一定范围内。但蚊子再小也是肉不是，要是能没风险还能PP多好？
　　

# 转账

　　
青蛙觉得办法还是有的。青蛙在以太坊链上部署了一智能合约。青蛙和牛蛙各转价值1万CNY的ETH到智能合约账户做为交易押金。青蛙和牛蛙还邀请二狗做智能合约的仲裁人（arbitrator）。交易分多次进行，每次不超过1万CNY。第一次成功后，双方无异议，则开始第二次转账。以此类推，直至整个交易最终完成，双方同意撤回押金。交易顺利，并没有二狗什么事情。万一交易双方有异议，则二狗的生意就来了。二狗根据双方当前的转账记录，判断谁的押金给另外一方，并收取点仲裁费。
　　
　　
# 撮合


USD和CNY的价格怎么确定呢？牛蛙见多识广，说按照火币和邮局的市价来确定。青蛙觉得好有道理。细细一想，要是火币、okcoin等也只能币币交易了呢？如何确定CNY和USD在数字经济体内的价格呢？Ripple或者Stellar还是得起作用呀。Ripple或Stellar作为分布式撮合系统，读取交易双方在智能合约里的交易押金并按挂单汇率折算可交易量。交易也可分多次完成，且交易一次，转账一次。双方无异议，则继续。如有异议，就可以使用二狗这样的仲裁人了。


# 优势

   * 资金安全，不用担心对方跑路或赖账

   * 上述（USD，CNY）交易对的故事可以推广到（BTC,CNY）,(LTC,CNY),(JPY,CNY)等别的加密货币和外汇

   * 没有中心化的网关或者localBitcoins场外交易这样的中心化撮合网站。无论面临何种外部压力，都能像比特币系统一样不停机工作

   * 没有充值费或者提现费（除了银行的转账费用外）

# 劣势

   * 转账需押金，多次转账。押金越少，转账次数可能越多。具体转账次数依赖于押金和转账金额

   * 要求交易双方都有ETH

   * 用户需理解基于智能合约押金转账与依赖中心化机构信任背书的转账的不同，需一定时间习惯操作方式

# 智能合约代码


# 智能合约地址


# 使用教程

## 钱包

## 新用户（无CNY或者其它任何数字加密货币的用户）

新用户需要一点ETH。可以和提供P2P CNY充值服务的用户交易。为了安全，交易过程分多次进行。建议每次不超过10块。智能合约为新用户提供不超过10块的担保。如果交易顺利完成，新用户就可以和其它任何人安全地点对点地交易了。









# 路线图

  * 2017年9月，完成智能合约并部署测试

  * 2017年10月，正式上线，基于Mist和ethereum wallet等钱包完成使用教程

  * 2018年 2 月， 提供汉化定制版钱包

  * 2018年 12 月， 为钱包提供可定制的交易系统

  * 2019年 12 月， 为钱包提供基于counterfactual regret minimization 算法的分布式投资辅助决策系统

    

# 打赏

######

  Ripple地址： rhbaA9xBaBjzgRwAghAbCVz4Ym7qw9UnWy

###### 

  Bitcoin地址：1BBw45CQxieVkxoC8o2G2Jfcz7EdeeVbXs


###### 

  以太坊地址： 0x1eb3162901545cb116b780f3456186b5d1396142

###### 

  Stellar地址： GBXXGZGNA6DQ5U4LKF6FP3QNXIZ4X3OTSRXYRV36N5UPKB5JG6Y3ROCK


